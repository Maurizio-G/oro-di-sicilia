<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oro di Sicilia ‚Äì Frisches aus Sizilien</title>
 <style>
  header {
    background-image: url('Banner.jpg');
    background-size: cover;
    background-position: center;
    color: white;
    padding: 4rem 2rem;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }

  header h1, header p {
    text-shadow: 1px 1px 3px rgba(0,0,0,0.6);
  }
   
    h1 {
      margin: 0;
      font-size: 2.5rem;
    }

    main {
      max-width: 800px;
      margin: 2rem auto;
      padding: 0 1rem;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    section {
      margin-bottom: 2rem;
    }

    h2 {
      color: #b8741b;
      margin-bottom: 0.25rem;
    }

    h3 {
      margin: 0.5rem 0 0.25rem;
      color: #b8741b;
    }

    small em {
      color: #666;
      font-size: 0.9rem;
    }

    footer {
      background: #e3b04b;
      color: white;
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.5rem;
    }

    .product-card {
      background: #fff5e6;
      padding: 1rem;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .product-card img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      margin-bottom: 0.5rem;
    }
  </style>
<!-- CHAT BUBBLE -->
<!-- CHAT BUBBLE -->
<button id="chatBubble" aria-label="Apri chat di supporto" style="
    position: fixed;
    bottom: 22px;
    right: 22px;
    width: 70px;
    height: 70px;
    background: #ff8c00;
    border-radius: 50%;
    box-shadow: 0 6px 18px rgba(0,0,0,0.25);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 99999;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: none;
    outline: none;
">
    <img src="https://upload.wikimedia.org/wikipedia/commons/9/9a/Orange_fruit_icon.png" 
         alt="Chat" style="width:40px; height:40px;">
</button>

<!-- CHAT WINDOW -->
<div id="chatWindow" role="dialog" aria-label="Chat di supporto Oro di Sicilia" aria-modal="true" style="
    position: fixed;
    bottom: 120px;
    right: 22px;
    width: 380px;
    max-width: calc(100vw - 40px);
    height: 540px;
    max-height: calc(100vh - 140px);
    background: white;
    border-radius: 16px;
    box-shadow: 0 10px 28px rgba(0,0,0,0.35);
    display: none;
    flex-direction: column;
    overflow: hidden;
    z-index: 99999;
    font-family: system-ui, -apple-system, sans-serif;
    opacity: 0;
    transform: translateY(40px) scale(0.95);
    transition: all 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
    border: 1px solid #e5e5e5;
">

    <div style="background:#ff8c00; color:white; padding:18px; font-size:20px; font-weight:bold; display: flex; justify-content: space-between; align-items: center;">
        <span>üçä Oro di Sicilia ‚Äì Support Bot</span>
        <button id="closeChat" aria-label="Chiudi chat" style="background:none; border:none; color:white; font-size:24px; cursor:pointer; padding:0; width:30px; height:30px; display:flex; align-items:center; justify-content:center;">√ó</button>
    </div>

    <div id="messages" style="flex:1; padding:15px; overflow-y:auto; display:flex; flex-direction:column; gap:12px;"></div>

    <div style="padding:14px; display:flex; gap:10px; border-top:1px solid #eee; background:#f8f8f8;">
        <input id="userInput" type="text" placeholder="Scrivi qui / Write here / Schreiben Sie hier..."
            aria-label="Scrivi il tuo messaggio"
            style="flex:1; padding:12px; border-radius:10px; border:1px solid #ccc; font-size:14px; outline:none; transition:border-color 0.2s;">
        <button onclick="sendMessage()" aria-label="Invia messaggio" style="
            padding:12px 18px; background:#ff8c00; border:none; color:white;
            border-radius:10px; font-weight:bold; cursor:pointer; transition:background-color 0.2s; font-size:16px;">‚û§</button>
    </div>
</div>

<script>
/* ------------------------------
   GLOBAL VARIABLES & STATE
------------------------------ */
let isChatOpen = false;
const chatBubble = document.getElementById("chatBubble");
const chatWindow = document.getElementById("chatWindow");
const userInput = document.getElementById("userInput");
const messagesContainer = document.getElementById("messages");

/* ------------------------------
   ENHANCED KNOWLEDGE BASE
------------------------------ */
const KB = {
    DE: {
        greeting: "Hallo! Ich bin Ihr Unterst√ºtzungs-Bot f√ºr Oro di Sicilia. üçä<br>Fragen Sie mich nach Orangen, Mandarinen, Lieferung, Preisen und mehr!",
        oranges: "Orangen kommen von Dezember bis M√§rz. Tarocco ab Januar. Frisch von sizilianischen Bauernh√∂fen.",
        mandarins: "Mandarinen gibt es von November bis Januar. Saftig und s√º√ü!",
        tarocco: "Tarocco-Orangen sind von Januar bis M√§rz verf√ºgbar. Bekannt f√ºr ihre rote Farbe und S√º√üe.",
        lemons: "Zitronen fast das ganze Jahr. Beste Qualit√§t: Oktober bis Mai.",
        shipping: "Lieferzeit: 24‚Äì48h nach Versand. Versandtage: Montag bis Donnerstag. Kostenloser Versand ab 50‚Ç¨.",
        price: "Boxen 3‚Äì15 kg, Preise saisonabh√§ngig. 3kg Box: ~25‚Ç¨, 5kg Box: ~35‚Ç¨, 10kg Box: ~60‚Ç¨.",
        quality: "Unsere Fr√ºchte sind unbehandelt, naturbelassen und von zertifizierten Bauernh√∂fen.",
        contact: "Kontakt: <b>orodisicilia0@gmail.com</b><br>Telefon: +39 123 456 7890",
        thanks: "Gern geschehen! Bei weiteren Fragen stehe ich bereit. üçä",
        default: "Entschuldigung, ich habe das nicht verstanden. K√∂nnten Sie Ihre Frage anders formulieren? Sie k√∂nnen nach Orangen, Mandarinen, Lieferung, Preisen oder Qualit√§t fragen."
    },

    IT: {
        greeting: "Ciao! Sono il bot di supporto di Oro di Sicilia. üçä<br>Chiedimi di arance, mandarini, spedizioni, prezzi e altro!",
        oranges: "Le arance arrivano da dicembre a marzo. Le Tarocco da gennaio. Fresche dai agrumeti siciliani.",
        mandarins: "I mandarini sono disponibili da novembre a gennaio. Succosi e dolci!",
        tarocco: "Le Tarocco sono disponibili da gennaio a marzo. Note per il loro colore rosso e dolcezza.",
        lemons: "I limoni quasi tutto l'anno. Migliore qualit√†: ottobre-maggio.",
        shipping: "Consegna in 24‚Äì48h dalla spedizione. Spedizioni luned√¨-gioved√¨. Spedizione gratuita sopra 50‚Ç¨.",
        price: "Box da 3‚Äì15 kg. Prezzi stagionali. Box 3kg: ~25‚Ç¨, 5kg: ~35‚Ç¨, 10kg: ~60‚Ç¨.",
        quality: "Frutta naturale, non trattata, da aziende familiari certificate.",
        contact: "Email: <b>orodisicilia0@gmail.com</b><br>Telefono: +39 123 456 7890",
        thanks: "Prego! Sono qui per qualsiasi altra domanda. üçä",
        default: "Mi dispiace, non ho capito. Potreste riformulare la domanda? Potete chiedere di arance, mandarini, spedizioni, prezzi o qualit√†."
    },

    EN: {
        greeting: "Hello! I'm your support bot for Oro di Sicilia. üçä<br>Ask me about oranges, mandarins, shipping, prices and more!",
        oranges: "Oranges are available from December to March. Tarocco from January. Fresh from Sicilian farms.",
        mandarins: "Mandarins are available from November to January. Juicy and sweet!",
        tarocco: "Tarocco oranges are available from January to March. Known for their red color and sweetness.",
        lemons: "Lemons almost all year. Best quality: October to May.",
        shipping: "Delivery 24‚Äì48h after shipping. Shipping Monday-Thursday. Free shipping above 50‚Ç¨.",
        price: "Boxes 3‚Äì15 kg. Seasonal pricing. 3kg box: ~25‚Ç¨, 5kg: ~35‚Ç¨, 10kg: ~60‚Ç¨.",
        quality: "Our fruits are natural, untreated, from certified family farms.",
        contact: "Contact: <b>orodisicilia0@gmail.com</b><br>Phone: +39 123 456 7890",
        thanks: "You're welcome! I'm here for any other questions. üçä",
        default: "Sorry, I didn't understand that. Could you rephrase your question? You can ask about oranges, mandarins, shipping, prices or quality."
    }
};

/* ------------------------------
   IMPROVED LANGUAGE DETECTION
------------------------------ */
function detectLanguage(text) {
    const t = text.toLowerCase();
    
    const patterns = {
        IT: [/grazie/i, /perfetto/i, /ottimo/i, /spedizione/i, /consegna/i, /quando/i, /prezzo/i, /costo/i],
        DE: [/danke/i, /perfekt/i, /ausgezeichnet/i, /lieferung/i, /versand/i, /wann/i, /preis/i, /kosten/i]
    };

    if (patterns.IT.some(pattern => pattern.test(t))) return "IT";
    if (patterns.DE.some(pattern => pattern.test(t))) return "DE";
    
    // Default to English for mixed or unclear language
    return "EN";
}

/* ------------------------------
   ADVANCED PATTERN MATCHING
------------------------------ */
function getBotReply(input) {
    const lang = detectLanguage(input);
    const t = input.toLowerCase().trim();

    // Greeting detection
    if (t.match(/(ciao|hello|hallo|buongiorno|good morning|guten tag|hey|hi|salve)/)) {
        return KB[lang].greeting;
    }

    // Thanks detection
    if (t.match(/(grazie|thanks|danke|thank you|dankesch√∂n)/)) {
        return KB[lang].thanks;
    }

    // Enhanced pattern matching with better coverage
    const patterns = {
        oranges: [/\borange?s?\b/i, /\barance?\b/i, /\baranci?\b/i, /\borangen\b/i],
        mandarins: [/\bmandarini?\b/i, /\bmandarine?s?\b/i, /\bmandarinen\b/i],
        tarocco: [/\btarocco\b/i],
        lemons: [/\blemons?\b/i, /\blimoni?\b/i, /\bzitronen?\b/i],
        shipping: [/\bshipping\b/i, /\bspedizione\b/i, /\bversand\b/i, /\blieferung\b/i, /\bdelivery\b/i, /\bconsegna\b/i],
        price: [/\bprice\b/i, /\bprezzo?\b/i, /\bpreis\b/i, /\bcosto?\b/i, /\bkosten?\b/i, /\bhow much\b/i],
        quality: [/\bquality\b/i, /\bqualit√†\b/i, /\bqualitat\b/i, /\bbio\b/i, /\borganic\b/i, /\bnatural\b/i],
        contact: [/\bcontact\b/i, /\bemail\b/i, /\bkontakt\b/i, /\bcontatto\b/i, /\bphone\b/i, /\btelefono\b/i, /\bnumber\b/i]
    };

    for (const [key, regexArray] of Object.entries(patterns)) {
        if (regexArray.some(regex => regex.test(t))) {
            return KB[lang][key];
        }
    }

    return KB[lang].default;
}

/* ------------------------------
   ENHANCED UI MESSAGE SYSTEM
------------------------------ */
function addMessage(text, type) {
    const div = document.createElement("div");
    const timestamp = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    
    div.innerHTML = `
        <div style="margin-bottom:4px; font-size:11px; color:#666; ${type === 'user' ? 'text-align:right;' : ''}">
            ${type === 'bot' ? 'üçä Support Bot' : 'You'} ‚Ä¢ ${timestamp}
        </div>
        <div>${text}</div>
    `;
    
    div.style.cssText = `
        margin: 0; 
        padding: 12px; 
        border-radius: 16px; 
        max-width: 85%;
        word-wrap: break-word;
        ${type === "bot" 
            ? "background:#fff8e1; border:1px solid #ffe082; align-self:flex-start; border-bottom-left-radius:4px;" 
            : "background:#e3f2fd; border:1px solid #90caf9; align-self:flex-end; border-bottom-right-radius:4px; margin-left:auto; text-align:left;"}
    `;

    messagesContainer.appendChild(div);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

/* ------------------------------
   IMPROVED CHAT MANAGEMENT
------------------------------ */
function toggleChat() {
    isChatOpen = !isChatOpen;
    
    if (isChatOpen) {
        chatWindow.style.display = "flex";
        setTimeout(() => {
            chatWindow.style.opacity = "1";
            chatWindow.style.transform = "translateY(0) scale(1)";
        }, 10);
        
        // Add welcome message if first time
        if (messagesContainer.children.length === 0) {
            setTimeout(() => {
                const lang = detectLanguage(navigator.language || navigator.userLanguage);
                addMessage(KB[lang].greeting, "bot");
            }, 300);
        }
        
        // Focus input
        setTimeout(() => userInput.focus(), 350);
    } else {
        chatWindow.style.opacity = "0";
        chatWindow.style.transform = "translateY(40px) scale(0.95)";
        setTimeout(() => chatWindow.style.display = "none", 300);
    }
}

function sendMessage() {
    const val = userInput.value.trim();
    if (!val) return;

    addMessage(val, "user");
    userInput.value = "";

    // Simulate typing delay
    setTimeout(() => {
        const reply = getBotReply(val);
        addMessage(reply, "bot");
    }, 800 + Math.random() * 600);
}

/* ------------------------------
   EVENT LISTENERS & ACCESSIBILITY
------------------------------ */
chatBubble.addEventListener("click", toggleChat);

document.getElementById("closeChat").addEventListener("click", (e) => {
    e.stopPropagation();
    isChatOpen = true;
    toggleChat();
});

// Keyboard support
userInput.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
        sendMessage();
    }
});

// Close chat with Escape key
document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && isChatOpen) {
        toggleChat();
    }
});

// Better hover effects
chatBubble.addEventListener("mouseenter", () => {
    chatBubble.style.transform = "scale(1.1)";
});
chatBubble.addEventListener("mouseleave", () => {
    chatBubble.style.transform = "scale(1)";
});

// Click outside to close
document.addEventListener("click", (e) => {
    if (isChatOpen && 
        !chatWindow.contains(e.target) && 
        !chatBubble.contains(e.target)) {
        toggleChat();
    }
});
</script>
</script>
</head>
<body>
  <header>
    <h1>Oro di Sicilia</h1>
    <p>Frisches Obst & Gem√ºse direkt aus Sizilien<br><small><em>Frutta e verdura fresca direttamente dalla Sicilia</em></small></p>
  </header>

  <main>
    <section>
      <h2>Oro di Sicilia ‚Äì Der Geschmack Siziliens</h2>
      <small><em>Il gusto autentico della Sicilia</em></small>
      <p>
        Frisches Obst und Gem√ºse direkt aus Sizilien ‚Äì mit Liebe angebaut, von Hand geerntet und ohne Umwege zu dir gebracht.
        <strong>Oro di Sicilia</strong> ist ein kleines Familienunternehmen mit Wurzeln in Sizilien.
        Wir stehen f√ºr ehrliche, nachhaltige Landwirtschaft und bringen dir den echten Geschmack unserer Heimat direkt nach Hause.
      </p>
    </section>

<section>
  <h2>Unsere Produkte</h2>
  <small><em>I nostri prodotti</em></small>
  <div class="product-grid">
    <div class="product-card"> 
      <h3>Blut-Orangen (Tarocco)</h3>
      <img src="Tarocco" alt="Blut-Orangen (Tarocco)" />
      <p>3,00 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Navel Orangen</h3>
      <img src="Navel.jpg" alt="Navel Orangen" />
      <p>3,00 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Vanille Orangen</h3>
      <img src="Vanille.jpg" alt="Vanille Orangen" />
      <p>3,50 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Orangen Marmelade</h3>
      <img src="Orangen Marmelade.jpg" alt="Orangen Marmelade" />
      <p>3,99 ‚Ç¨</p>
    </div>
    
    <div class="product-card">
      <h3>Zitronen</h3>
      <img src="Zitrone" alt="Zitronen" />
      <p>3,99 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Clementinen</h3>
      <img src="Clementini" alt="Clementinen" />
      <p>2,99 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Mandarinen</h3>
      <img src="Mandarinen.jpg" alt="Mandarinen" />
      <p>2,90 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Ceder</h3>
      <img src="Ceder" alt="Ceder" />
      <p>5,00‚Äì6,00 ‚Ç¨ / St√ºck</p>
    </div>
    
    <div class="product-card">
      <h3>Kaktus feige</h3>
      <img src="Kaktus feige.jpg" alt="Kaktusfeige" />
      <p>2,50 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Dattel Tomate</h3>
      <img src="Dattel Tomaten.jpg" alt="Dattel Tomate" />
      <p>7,00 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>San Marzano Tomaten</h3>
      <img src="San Marzano (Tomate).jpg" alt="San Marzano Tomaten" />
      <p>5,00 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Merinda Tomaten</h3>
      <img src="Merinde.jpg" alt="Merinda Tomaten" />
      <p>6,90 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Getrocknete Tomaten</h3>
      <img src="Getrocknete Tomaten.jpg" alt="Getrocknete Tomaten" />
      <p>4,50 ‚Ç¨</p>
    </div>
    
    <div class="product-card">
      <h3>Auberginen</h3>
      <img src="Auberginen.jpg" alt="Auberginen" />
      <p>3,99 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Fenchel</h3>
      <img src="Fenchel.jpg" alt="Fenchel" />
      <p>2,99 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Artischocken</h3>
      <img src="Artischocken.jpg" alt="Artischocken" />
      <p>1,00‚Äì1,20 ‚Ç¨ / St√ºck</p>
    </div>
    
    <div class="product-card">
      <h3>Tropea Zwiebeln</h3>
      <img src="Tropea Zwiebel.jpg" alt="Tropea Zwiebeln" />
      <p>6,00 ‚Ç¨ / Bund</p>
    </div>
    
    <div class="product-card">
      <h3>Wei√üe Zwiebel</h3>
      <img src="Wei√ü Zwiebel.jpg" alt="Wei√üe Zwiebel" />
      <p>3,00 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Riesen Zwiebel (Giaratana)</h3>
      <img src="Giaratana.jpg" alt="Riesen Zwiebel (Giaratana)" />
      <p>4,00 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Spitz Paprika</h3>
      <img src="Spitz Paprika.jpg" alt="Spitz Paprika" />
      <p>2,99 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Paprika (normal)</h3>
      <img src="Paprika (Normal).jpg" alt="Paprika (Normal)" />
      <p>3,99 ‚Ç¨ / kg</p>
    </div>
    
    <div class="product-card">
      <h3>Lila Blumenkohl</h3>
      <img src="Lila Blumenkohl.jpg" alt="Lila Blumenkohl" />
      <p>Preis variabel</p>
    </div>
    
    <div class="product-card">
      <h3>St√§ngelkohl</h3>
      <img src="St√§ngelkohl.jpg" alt="St√§ngelkohl" />
      <p>Preis variabel</p>
    </div>
    
    <div class="product-card">
      <h3>Oliven√∂l</h3>
      <img src="Oliven √ñl.jpg" alt="Oliven √ñl" />
      <p>18,00 ‚Ç¨ / L</p>
    </div>
  </div>
</section>

          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    &copy; 2025 Oro di Sicilia. Alle Rechte vorbehalten. <br>
    <small><em>Siamo un'azienda a conduzione familiare. Parliamo anche italiano!</em></small>
    <p style="margin-top: 0.5rem;">
      üìß E-Mail: <a href="mailto:orodisicilia0@gmail.com" style="color: white; text-decoration: underline;">orodisicilia0@gmail.com</a><br>
      ‚òéÔ∏è Telefon: <a href="tel:+4915731156957" style="color: white; text-decoration: underline;">+4915731156957</a>
    </p>
  </footer>
